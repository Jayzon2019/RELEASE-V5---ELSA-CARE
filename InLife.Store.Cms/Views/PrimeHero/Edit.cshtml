@model PrimeHeroViewModel

@{
	ViewData["Title"] = "Edit";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
	<div class="col-12">
		<div class="card">
			<div class="card-header">
				<h4 class="card-title text-title">Edit Prime Hero Banner</h4>
			</div>
			<div class="card-content">
				<div class="card-body card-dashboard">
					<div class="col-md-12">
						<form asp-action="Edit" enctype="multipart/form-data" novalidate>
							<div asp-validation-summary="ModelOnly" class="text-danger"></div>
							<p style="text-align:center;"><span style="color:red;"><b>@ViewBag.error</b></span></p>
							<input type="hidden" asp-for="Id" />
							<div class="row">
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<div style="width:150px;height:150px;">
												<img id="primeHero_img" src="@Model.PrimeHeroBg" width="150" height="150" style="width:100%;border:solid" />
											</div>
											<label class="control-label text-secondary">Prime Hero Background Image</label>
											<input type="file" title="search image" class="form-control" id="file" name="file" accept="image/*" onchange="show(this)" />
											<input type="hidden" asp-for="PrimeHeroBg" required />
											<span asp-validation-for="PrimeHeroBg" class="text-danger"></span><span style="display:none;" id="fileError" class="text-danger">Please upload a png , jpg or jpeg Image</span>
										</div>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<div style="width:150px;height:150px;">
												<img id="primeHeroMob_img" src="@Model.PrimeHeroMobBg" width="150" height="150" style="width:100%;border:solid" />
											</div>
											<label class="control-label text-secondary">Prime Hero Mobile Background Image</label>
											<input type="file" title="search image" class="form-control" id="fileMob" name="fileMob" accept="image/*" onchange="showMob(this)" />
											<input type="hidden" asp-for="PrimeHeroMobBg" required />
											<span asp-validation-for="PrimeHeroBg" class="text-danger"></span><span style="display:none;" id="mobFileError" class="text-danger">Please upload a png , jpg or jpeg Image</span>
										</div>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Prime Hero Title</label>
											<input asp-for="PrimeHeroTitle" class="form-control" placeholder="Enter Hero Title" required data-validation-required-message="Prime Hero Title is required" />
											<span asp-validation-for="PrimeHeroTitle" class="text-danger"></span>
										</div>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Content Position</label>
											<select class="form-control select2" name="ContentPostion" required data-validation-required-message="Content Position Is required">

												<option value="Left">Left</option>
												@{
													if (Model.ContentPostion == "Right")
													{
														<option selected="selected" value="Right">Right</option>
													}
													else
													{
														<option value="Right">Right</option>
													}
												}

											</select>
										</div>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Heading</label>
											<input asp-for="Heading" class="form-control" placeholder="Enter Prime Hero Heading" required data-validation-required-message="Prime Hero Heading is required" />
											<span asp-validation-for="Heading" class="text-danger"></span>
										</div>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Sub-Heading</label>
											<input asp-for="SubHeading" class="form-control" placeholder="Enter Prime Hero Sub-Heading" required data-validation-required-message="Prime Hero Sub-Heading is required" />
											<span asp-validation-for="SubHeading" class="text-danger"></span>
										</div>
									</div>
								</div>

								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Heading Color</label>
											<input asp-for="HeadingColor" class="form-control" id="color" name="HeadingColor" value="@Model.HeadingColor" required data-validation-required-message="Hero Heading Color is required" />
											<div id="picker"></div>
											<span asp-validation-for="HeadingColor" class="text-danger"></span>
										</div>
									</div>
								</div>

								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Sub-Heading Color</label>
											<input asp-for="SubHeadingColor" class="form-control" id="Sub-HeadingColor" name="SubHeadingColor" value="@Model.SubHeadingColor" required data-validation-required-message="Hero Sub-Heading Color is required" />
											<div id="Sub-HeadingPicker"></div>
											<span asp-validation-for="SubHeadingColor" class="text-danger"></span>
										</div>
									</div>
								</div>

								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Button Text</label>
											<input asp-for="PrimeHeroBtnTxt" class="form-control" placeholder="Enter Button Text" required data-validation-required-message="Button Text is required" />
											<span asp-validation-for="PrimeHeroBtnTxt" class="text-danger"></span>
										</div>
									</div>
								</div>
								<div class="col-sm-6">
									<div class="form-group">
										<div class="controls">
											<label class="control-label text-secondary">Button Link</label>
											<input asp-for="BtnTxtLink" class="form-control" placeholder="Enter Button Link" required data-validation-required-message="Button Link is required" />
											<span asp-validation-for="BtnTxtLink" class="text-danger"></span>
										</div>
									</div>
								</div>
							</div>
							<div class="row w-100">
								<div class="col-md-6">
									<div class="form-group">
										<input type="submit" onclick="myValidation()" value="Update" class="btn btn-primary" />
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group pull-right">
										<a asp-action="Index" class="btn btn-secondary">Back to List</a>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function ()
	{
		$('#picker').farbtastic('#color');
		$('#Sub-HeadingPicker').farbtastic('#Sub-HeadingColor');
	});
	function show(input)
	{
		if (ValidateFile())
		{
			if (input.files && input.files[0])
			{
				var filerdr = new FileReader();
				filerdr.onload = function (e)
				{
					var imgdata = e.target.result;
					$('#primeHero_img').attr('src', imgdata);
					$('#PrimeHeroBg').val(imgdata);
				}
				filerdr.readAsDataURL(input.files[0]);
			}
		}
	}
	function showMob(input)
	{
		if (ValidateMobFile())
		{
			if (input.files && input.files[0])
			{
				var filerdr = new FileReader();
				filerdr.onload = function (e)
				{
					var imgdata = e.target.result;
					$('#primeHeroMob_img').attr('src', imgdata);
					$('#PrimeHeroMobBg').val(imgdata);
				}
				filerdr.readAsDataURL(input.files[0]);
			}
		}
	}

	function ValidateFile()
	{
		var ext = $('#file').val().split('.').pop().toLowerCase();
		if (ext != null && ext != "")
		{
			if (ext == 'png')
			{
				$("#fileError").hide();
				$("#file").removeClass("invalid");
				return true;
			}
			else if (ext == 'jpg')
			{
				$("#fileError").hide();
				$("#file").removeClass("invalid");
				return true;
			}
			else if (ext == 'jpeg')
			{
				$("#fileError").hide();
				$("#file").removeClass("invalid");
				return true;
			}
			else
			{
				$("#fileError").show();
				$("#file").addClass("invalid");
				$('#primeHero_img').attr('src', "");
				return false;
			}
		}
		else
		{
			$("#mobFileError").hide();
			$("#fileMob").removeClass("invalid");
			return true;
		}
	}

	function ValidateMobFile()
	{
		var ext = $('#fileMob').val().split('.').pop().toLowerCase();
		if (ext != null && ext != "")
		{
			if (ext == 'png')
			{
				$("#mobFileError").hide();
				$("#fileMob").removeClass("invalid");
				return true;
			}
			else if (ext == 'jpg')
			{
				$("#mobFileError").hide();
				$("#fileMob").removeClass("invalid");
				return true;
			}
			else if (ext == 'jpeg')
			{
				$("#mobFileError").hide();
				$("#fileMob").removeClass("invalid");
				return true;
			}
			else
			{
				$("#mobFileError").show();
				$("#file").addClass("invalid");
				$('#primeHeroMob_img').attr('src', "");
				return false;
			}
		}
		else
		{
			$("#mobFileError").hide();
			$("#fileMob").removeClass("invalid");
			return true;
		}
	}

	function myValidation()
	{
		if (ValidateFile() == false)
		{
			event.preventDefault();
			return false;
		}
		if (ValidateMobFile() == false)
		{
			event.preventDefault();
			return false;
		}
	}
</script>
